<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>å®ç°å½©è™¹ç”»ç¬”ç»˜ç”»æ¿ğŸ˜Š</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    canvas {
      border: 1px solid black;
    }
  </style>
</head>

<body>
  <canvas id="draw" width="1200" height="800"></canvas>

  <script type="text/javascript">
    // è·å–canvasèŠ‚ç‚¹
    let canvas = document.querySelector('#draw');
    let ctx = canvas.getContext("2d");

    let colorDeg = 0;
    let lineWidth = 50;
    let direction = true;
    // hsl è‰²ç›¸(0 - 360) é¥±å’Œåº¦ æ˜åº¦
    ctx.strokeStyle = `hsl(${colorDeg}, 90%, 50%)`;
    ctx.lineWidth = `${lineWidth}`;
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';

    let drawing = false;
    let [x, y] = [0, 0]

    canvas.addEventListener("mousedown", (e) => {
      drawing = true;
      // æ‹¬å·ï¼Œæ–¹æ‹¬å·ï¼Œæ­£åˆ™å¼€å¤´çš„æ–œæ ï¼ŒåŠ å·ï¼Œå‡å·ï¼Œåå¼•å· ä½œä¸ºè¡Œé¦–çš„æ—¶å€™å¿…é¡»è¦åŠ åˆ†å·
      [x, y] = [e.offsetX, e.offsetY]
    });
    canvas.addEventListener('mousemove', (e) => {
      if (!drawing) return;
      ctx.beginPath();

      // æ§åˆ¶ç¬”è§¦å¤§å°
      colorDeg = colorDeg < 360 ? colorDeg + 1 : 0;
      if (lineWidth > 50 || lineWidth < 10) {
        direction = !direction
      }
      direction ? lineWidth++ : lineWidth--;
      ctx.lineWidth = `${lineWidth}`;

      // å½©è™¹æ•ˆ
      ctx.strokeStyle = `hsl(${colorDeg}, 90%, 50%)`;

      // æ§åˆ¶ç»˜åˆ¶è·¯å¾„
      ctx.moveTo(x, y);
      console.log(x, y);
      ctx.lineTo(e.offsetX, e.offsetY);
      [x, y] = [e.offsetX, e.offsetY];
      ctx.stroke();
    })
    canvas.addEventListener('mouseup', () => {
      drawing = false
    });
    canvas.addEventListener('mouseleave', () => {
      drawing = false
    })
  </script>
</body>

</html>